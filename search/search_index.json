{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#about","title":"About","text":"<p>This is my personal blog. I write about things mainly for myself to be able to remember them later.</p>"},{"location":"#latest-posts","title":"Latest posts","text":""},{"location":"category/blogging/","title":"Blogging","text":"<p>This is the blogging category. This gathers all the posts that relate to my blogging generally.</p>"},{"location":"category/homelab/","title":"Homelab","text":"<p>My homelab category. Currently a modest Raspberry Pi and a Mac Mini.</p>"},{"location":"2025/05/01/blogging-with-mkdocs/","title":"Blogging with MkDocs","text":"<p>I've been looking for a good tool to setup a personal blog. MkDocs might be a good one so I decided to test it.</p> <p>I wanted a way to work with a local tool so that I can use AI-tools to help me with tagging and similar things. I also wanted to be able to deploy it online simply so GitHub Pages seemed like a good option, which MkDocs supports.</p>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#setting-up-mkdocs","title":"Setting up <code>mkdocs</code>","text":"<p>The first step was to setup the project by running this:</p> Bash<pre><code># Setup the directory for the repo\nmkdir personal-blog\ncd personal-blog\n\n# Setup a UV project\nuv init\n\n# Activate the venv before installing dependencies\nsource .venv/bin/activate\n\n# install mkdocs and the theme material in one go\nuv add mkdocs-material\n</code></pre>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#configuring-mkdocs","title":"Configuring mkdocs","text":"<p>In order to make the blog look the way I wanted it to, there was quite a bit of config to be done.</p>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#configuring-mkdocs-for-blogging","title":"Configuring mkdocs for blogging","text":"<p>First of all, the config file needs to be created:</p> Bash<pre><code>touch mkdocs.yml\n</code></pre> <p>Once that is created, the blog plugin needs to be enabled, together with some additional config:</p> YAML<pre><code>theme:\n  name: material # Enable the mkdocs-material theme\n  features:\n    - navigation.path\n    - navigation.prune\n\nplugins:\n  - blog:\n    blog_dir: . # This is necessary since I'm only blogging, not building documentation as well\n</code></pre>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#additional-configuration","title":"Additional configuration","text":"","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#categories","title":"Categories","text":"<p>IN order to make sure that I am consistent with my categories, only specific ones should be allowed. This is set in the <code>mkdocs.yml</code> config file as well:</p> YAML<pre><code>plugins:\n  - blog:\n      ... # Other config\n      categories_allowed:\n        - blogging\n        - projects\n</code></pre>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#full-config-file","title":"Full config file","text":"<p>This is the full config file contents:</p> YAML<pre><code>site_name: Personal blog\nsite_description: My personal blog to keep track of my thoughts and ideas.\nsite_url: https://www.example.com\n\ntheme:\n  name: material\n  features:\n    - navigation.path\n    - navigation.prune\n\nmarkdown_extensions:\n  - def_list\n  - pymdownx.tasklist:\n      custom_checkbox: true\n  - pymdownx.highlight:\n      use_pygments: true\n      auto_title: true\n      linenums_style: pymdownx-inline\n      anchor_linenums: true\n      line_spans: __span\n      pygments_lang_class: true\n  - pymdownx.inlinehilite\n  - pymdownx.snippets\n  - pymdownx.superfences\n  - pymdownx.betterem\n\nplugins:\n  - search\n  - blog:\n      blog_dir: .\n      categories_allowed:\n        - blogging\n        - projects\n      post_date_format: long\n      post_excerpt_separator: &lt;!-- end-excerpt --&gt;\n      archive_url_date_format: yyyy/MM\n  - meta\n  - tags\n</code></pre>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#working-locally","title":"Working locally","text":"<p>In order to see posts and navigating the site locally, the server needs to be started:</p> Bash<pre><code>mkdocs serve\n</code></pre>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#publishing-the-blog","title":"Publishing the blog","text":"<p>The blog is currently hosted on GitHub Pages under the URL https://cstalhem.github.io. This is the process to set that up:</p> <ol> <li>Create a new public repository on GitHub</li> <li>This needs to be called [username].github.io</li> <li>Link the local project to the repo</li> <li>Set up GitHub Actions</li> <li>Push the code!</li> </ol>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#linking-local-project-to-the-repo","title":"Linking local project to the repo","text":"<p>In order to link the local code to the GitHub repo use this command (assuming that a repo is already setup locally):</p> Bash<pre><code>git remote add origin &lt;link-to-repo&gt;\n</code></pre>","tags":["mkdocs","project-setup"]},{"location":"2025/05/01/blogging-with-mkdocs/#setup-github-actions","title":"Setup GitHub Actions","text":"<p>This is the first time I'm using GitHub actions so I needed some help from Claude to understand what to do.</p> <p>It was rather simple though, just added the template workflow from the MkDocs Material docs and removed an unnecessary branch name.</p> <p>I also updated the settings of my repo to use the <code>gh-deploy</code> branch as the source of the blog.</p>","tags":["mkdocs","project-setup"]},{"location":"2025/05/06/pihole-dns-and-nice-urls-with-traefik/","title":"PiHole, DNS and nice URLs with Traefik","text":"","tags":["dns","pi-hole"]},{"location":"2025/05/06/pihole-dns-and-nice-urls-with-traefik/#background","title":"Background","text":"<p>I have been wanting to setup a Pi-Hole on my HomeLab for a while now and I finally got around to doing it.</p> <p>I had a few considerations that I needed to account for:</p> <ol> <li>I already use a DNS server locally (Bind9) that I use to enable access to services through nice URLs (using <code>*.home.stalhem.se</code> for my internal stuff), and I want these to keep working</li> <li>I wanted the Pi-Hole to block ads and tracking on all devices without having to set that up on each device individually</li> <li>I wanted to run the Pi-Hole on my Mac Mini-server since it has better performance than the Raspberry Pi 5</li> <li>I use Tailscale on my own devices in order to access my Home Lab from anywhere without exposing anything through my router</li> </ol>","tags":["dns","pi-hole"]},{"location":"2025/05/06/pihole-dns-and-nice-urls-with-traefik/#dns-service-order","title":"DNS Service order","text":"<p>Initially I set up this flow:</p> <pre><code>graph LR\n  A[Client] --&gt; D[Router] --&gt; B[Pi-Hole] --&gt; C[Bind9] --&gt; E[Internet]</code></pre> <p>However, this caused issues since I am running Traefik on my Raspberry Pi. Traefik uses Cloudflare and Let's Encrypt to issue certificates and therefore allow HTTPS-traffic to the services it has configured. Routing requests via the Pi-Hole changed the DNS-lookup chain, which made the certificates invalid. I therefore had to switch the order around to this:</p> <pre><code>graph LR\n  Client --&gt; Router --&gt; Bind9 --&gt; Pi-Hole --&gt; Internet</code></pre> <p>Bind9 is configured to use the Pi-Hole as the only upstream DNS, so any requests that are not to local services are forwarded there.</p> <p>The Pi-Hole in turn uses Cloudflare DNS (1.1.1.1 and 1.0.0.1) as upstream DNS, so any requests that are not blocked by the Pi-Hole are sent there for resolving.</p>","tags":["dns","pi-hole"]},{"location":"2025/05/06/pihole-dns-and-nice-urls-with-traefik/#router-setup","title":"Router Setup","text":"<p>I've also configured the Router to use the IP of the Raspberry Pi as the primary DNS server for the internal network. This ensures that any client that is issued an IP by the router, also initially talks to the Bind9 server as the primary DNS.</p>","tags":["dns","pi-hole"]},{"location":"2025/05/06/pihole-dns-and-nice-urls-with-traefik/#tailscale","title":"Tailscale","text":"<p>Along the way, I also remembered (and forgot a few times) that, since I am using Tailscale, I need to modify that configuration in order to allow clients that are actively connected to the Tailscale network to also use Bind9 as the primary DNS server.</p> <p>This was possible to set up using what Tailscale calls \"Split DNS\". Essentially, this forces any queries to a specific URL to use a different IP as the DNS server rather than the normal one.</p>","tags":["dns","pi-hole"]},{"location":"2025/05/06/pihole-dns-and-nice-urls-with-traefik/#additional-considerations","title":"Additional considerations","text":"<p>This setup works fine for the most part. I have one issue I would like to resolve and a few other thoughts.</p> <p>At the moment, the logs in Pi-Hole shows that all requests are coming from <code>home.stalhem.se</code>. This is because all requests are routed from the Bind9 server. I would like to forward all the client information so that it is possible to see which client on the network is actually sending what traffic.</p> <p>I am also considering moving the Bind9 server over to the Mac Mini. This might allow me to use the Docker container name as the upstream DNS server for Bind9, and should possibly speed up request time between the containers (not that it is particularly slow at the moment). This might be problematic though since that would mean that if the Mac Mini fails for some reason, the entire DNS-chain breaks. It can be fixed easily by removing the settings on the Router though, so it's probably not much of a problem.</p>","tags":["dns","pi-hole"]},{"location":"archive/2025/05/","title":"2025","text":""}]}